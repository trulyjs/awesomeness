"use strict";exports.__esModule=!0,exports.default=void 0;function _defineProperty(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}class TrulyBase{constructor(){_defineProperty(this,"context",void 0)}static extend(a){Object.keys(a).forEach(b=>{const c=a[b];if(c.name)throw Error("Truly extend does not support name in extension body");c.name=b,TrulyBase.register(c)})}static register(a){if(!a.name)throw Error("Truly register requires a name");const b=GetMethods(Truly).includes(a.name)?Truly.prototype[a.name]:null,c=function(b,c){if("isSupported"in a&&!a.isSupported(b)){const d=a=>JSON.stringify(a,null,"2");throw Error(`Truly extension "${a.name}" failed to support: 
                          subject: ${d(b)})
                          context: ${d(c)}
                          `)}return a.transform(b,c)};Truly.prototype[a.name]=function(a){return b&&b.call(this,a,this.context),this.context=c.call(this,a,this.context),this}}then(a){return"undefined"!=typeof a&&(this.context=this.context?a:null),this.context}}function GetMethods(a){return Object.getOwnPropertyNames(a.prototype)}function LinkMethods(a,b){GetMethods(b).forEach(c=>a.prototype[c]=a.prototype[c]?a.prototype[c]:b.prototype[c])}function Truly(a){this.context=a}Truly.extend=TrulyBase.extend,Truly.register=TrulyBase.register,LinkMethods(Truly,TrulyBase);var _default=Truly;exports.default=_default;